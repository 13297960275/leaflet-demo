!function(t){if("function"==typeof define&&define.amd)define(["leaflet"],t);else if("undefined"!=typeof module&&"undefined"!=typeof require)module.exports=t(require("leaflet"));else{if(void 0===window.L)throw"Leaflet must be loaded first";t(window.L)}}(function(l){var e=Math.PI/180;function t(t){return(t-90)*e}l.Point.prototype.rotated=function(t,e){return function(t,e,i){return t.add(l.point(Math.cos(e),Math.sin(e)).multiplyBy(i))}(this,t,e)};var i={options:{startAngle:0,stopAngle:359.9999},startAngle:function(){return this.options.startAngle<this.options.stopAngle?t(this.options.startAngle):t(this.options.stopAngle)},stopAngle:function(){return this.options.startAngle<this.options.stopAngle?t(this.options.stopAngle):t(this.options.startAngle)},setStartAngle:function(t){return this.options.startAngle=t,this.redraw()},setStopAngle:function(t){return this.options.stopAngle=t,this.redraw()},setDirection:function(t,e){return void 0===e&&(e=10),this.options.startAngle=t-e/2,this.options.stopAngle=t+e/2,this.redraw()},getDirection:function(){return this.stopAngle()-(this.stopAngle()-this.startAngle())/2},isSemicircle:function(){var t=this.options.startAngle,e=this.options.stopAngle;return!(0===t&&359<e||t==e)},_containsPoint:function(t){function e(t){for(;t<=-Math.PI;)t+=2*Math.PI;for(;t>Math.PI;)t-=2*Math.PI;return t}var i=Math.atan2(t.y-this._point.y,t.x-this._point.x),n=e(this.startAngle()),r=e(this.stopAngle());return r<=n&&(r+=2*Math.PI),i<=n&&(i+=2*Math.PI),n<i&&i<=r&&t.distanceTo(this._point)<=this._radius+this._clickTolerance()}};l.SemiCircle=l.Circle.extend(i),l.SemiCircleMarker=l.CircleMarker.extend(i),l.semiCircle=function(t,e){return new l.SemiCircle(t,e)},l.semiCircleMarker=function(t,e){return new l.SemiCircleMarker(t,e)};var c=l.SVG.prototype._updateCircle,s=l.Canvas.prototype._updateCircle;l.SVG.include({_updateCircle:function(t){if(!(t instanceof l.SemiCircle||t instanceof l.SemiCircleMarker)||!t.isSemicircle())return c.call(this,t);if(t._empty())return this._setPath(t,"M0 0");var e=t._map.latLngToLayerPoint(t._latlng),i=t._radius,n=Math.round(t._radiusY||i),r=e.rotated(t.startAngle(),i),o=e.rotated(t.stopAngle(),i),s=180<=t.options.stopAngle-t.options.startAngle?"1":"0",a="M"+e.x+","+e.y+"L"+r.x+","+r.y+"A "+i+","+n+",0,"+s+",1,"+o.x+","+o.y+" z";this._setPath(t,a)}}),l.Canvas.include({_updateCircle:function(t){if(!(t instanceof l.SemiCircle||t instanceof l.SemiCircleMarker)||!t.isSemicircle())return s.call(this,t);var e=t._point,i=this._ctx,n=t._radius,r=(t._radiusY||n)/n,o=e.rotated(t.startAngle(),n);this._drawnLayers[t._leaflet_id]=t,1!=r&&(i.save(),i.scale(1,r)),i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(o.x,o.y),i.arc(e.x,e.y,n,t.startAngle(),t.stopAngle()),i.lineTo(e.x,e.y),1!=r&&i.restore(),this._fillStroke(i,t)}})});