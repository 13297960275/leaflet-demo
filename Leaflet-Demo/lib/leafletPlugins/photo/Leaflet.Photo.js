L.Photo=L.FeatureGroup.extend({options:{icon:{iconSize:[40,40]}},initialize:function(t,e){L.setOptions(this,e),L.FeatureGroup.prototype.initialize.call(this,t)},addLayers:function(t){if(t)for(var e=0,o=t.length;e<o;e++)this.addLayer(t[e]);return this},addLayer:function(t){L.FeatureGroup.prototype.addLayer.call(this,this.createMarker(t))},addMarker:function(t){L.FeatureGroup.prototype.addLayer.call(this,t)},createMarker:function(t){var e=L.marker(t,{icon:L.divIcon(L.extend({html:'<div style="background-image: url('+t.thumbnail+');"></div>​',className:"leaflet-marker-photo"},t,this.options.icon)),title:t.mc||""});return e.photo=t,e}}),L.photo=function(t,e){return new L.Photo(t,e)},L.MarkerClusterGroup&&(L.Photo.Cluster=L.MarkerClusterGroup.extend({options:{featureGroup:L.photo,maxClusterRadius:100,showCoverageOnHover:!1,iconCreateFunction:function(t){return new L.DivIcon(L.extend({className:"leaflet-marker-photo",html:'<div style="background-image: url('+t.getAllChildMarkers()[0].photo.thumbnail+');"></div>​<b>'+t.getChildCount()+"</b>"},this.icon))},icon:{iconSize:[40,40]}},initialize:function(t){t=L.Util.setOptions(this,t),L.MarkerClusterGroup.prototype.initialize.call(this),this._photos=t.featureGroup(null,t)},add:function(t){return this.addLayer(this._photos.addLayers(t)),this},clear:function(){this._photos.clearLayers(),this.clearLayers()}}),L.photo.cluster=function(t){return new L.Photo.Cluster(t)});