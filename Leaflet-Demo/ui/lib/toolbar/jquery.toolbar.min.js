
"function"!=typeof Object.create&&(Object.create=function(t){function o(){}return o.prototype=t,new o}),function(s,n,t,o){var e={init:function(t,o){var e=this;e.elem=o,e.$elem=s(o),e.options=s.extend({},s.fn.toolbar.options,t),e.metadata=e.$elem.data(),e.overrideOptions(),e.toolbar=s('<div class="tool-container" />').addClass("tool-"+e.options.position).addClass("toolbar-"+e.options.style).append('<div class="tool-items" />').append('<div class="arrow" />').appendTo("body").css("opacity",0).hide(),e.toolbar_arrow=e.toolbar.find(".arrow"),e.initializeToolbar()},overrideOptions:function(){var o=this;s.each(o.options,function(t){void 0!==o.$elem.data("toolbar-"+t)&&(o.options[t]=o.$elem.data("toolbar-"+t))})},initializeToolbar:function(){var t=this;t.populateContent(),t.setTrigger(),t.toolbarWidth=t.toolbar.width()},setTrigger:function(){function o(){i.$elem.hasClass("pressed")?e=setTimeout(function(){i.hide()},150):clearTimeout(e)}var e,i=this;"click"!=i.options.event&&(i.$elem.on({mouseenter:function(t){i.$elem.hasClass("pressed")?clearTimeout(e):i.show()}}),i.$elem.parent().on({mouseleave:function(t){o()}}),s(".tool-container").on({mouseenter:function(t){clearTimeout(e)},mouseleave:function(t){o()}}));"click"==i.options.event&&(i.$elem.on("click",function(t){t.preventDefault(),i.$elem.hasClass("pressed")?i.hide():i.show()}),i.options.hideOnClick&&s("html").on("click.toolbar",function(t){t.target!=i.elem&&0===i.$elem.has(t.target).length&&0===i.toolbar.has(t.target).length&&i.toolbar.is(":visible")&&i.hide()})),s(n).resize(function(t){t.stopPropagation(),i.toolbar.is(":visible")&&(i.toolbarCss=i.getCoordinates(i.options.position,20),i.collisionDetection(),i.toolbar.css(i.toolbarCss),i.toolbar_arrow.css(i.arrowCss))})},populateContent:function(){var o=this,t=o.toolbar.find(".tool-items"),e=s(o.options.content).clone(!0).find("a").addClass("tool-item");t.html(e),t.find(".tool-item").on("click",function(t){t.preventDefault(),o.$elem.trigger("toolbarItemClick",this)})},calculatePosition:function(){var t=this;t.arrowCss={},t.toolbarCss=t.getCoordinates(t.options.position,t.options.adjustment),t.toolbarCss.position="absolute",t.toolbarCss.zIndex=t.options.zIndex,t.collisionDetection(),t.toolbar.css(t.toolbarCss),t.toolbar_arrow.css(t.arrowCss)},getCoordinates:function(t,o){var e=this;switch(e.coordinates=e.$elem.offset(),e.options.adjustment&&e.options.adjustment[e.options.position]&&(o=e.options.adjustment[e.options.position]+o),e.options.position){case"top":return{left:e.coordinates.left-e.toolbar.width()/2+e.$elem.outerWidth()/2,top:e.coordinates.top-e.$elem.outerHeight()-o,right:"auto"};case"left":return{left:e.coordinates.left-e.toolbar.width()/2-e.$elem.outerWidth()/2-o,top:e.coordinates.top-e.toolbar.height()/2+e.$elem.outerHeight()/2,right:"auto"};case"right":return{left:e.coordinates.left+e.toolbar.width()/2+e.$elem.outerWidth()/2+o,top:e.coordinates.top-e.toolbar.height()/2+e.$elem.outerHeight()/2,right:"auto"};case"bottom":return{left:e.coordinates.left-e.toolbar.width()/2+e.$elem.outerWidth()/2,top:e.coordinates.top+e.$elem.outerHeight()+o,right:"auto"}}},collisionDetection:function(){var t=this,o=20;("top"==t.options.position||"bottom"==t.options.position)&&(t.arrowCss={left:"50%",right:"50%"},t.toolbarCss.left<o?(t.toolbarCss.left=o,t.arrowCss.left=t.$elem.offset().left+t.$elem.width()/2-o):s(n).width()-(t.toolbarCss.left+t.toolbarWidth)<o&&(t.toolbarCss.right=o,t.toolbarCss.left="auto",t.arrowCss.left="auto",t.arrowCss.right=s(n).width()-t.$elem.offset().left-t.$elem.width()/2-o-5))},show:function(){var t=this;t.$elem.addClass("pressed"),t.calculatePosition(),t.toolbar.show().css({opacity:1}).addClass("animate-"+t.options.animation),t.$elem.trigger("toolbarShown")},hide:function(){var t=this,o={opacity:0};switch(t.$elem.removeClass("pressed"),t.options.position){case"top":o.top="+=20";break;case"left":o.left="+=20";break;case"right":o.left="-=20";break;case"bottom":o.top="-=20"}t.toolbar.animate(o,200,function(){t.toolbar.hide()}),t.$elem.trigger("toolbarHidden")},getToolbarElement:function(){return this.toolbar.find(".tool-items")}};s.fn.toolbar=function(o){if(s.isPlainObject(o))return this.each(function(){var t=Object.create(e);t.init(o,this),s(this).data("toolbarObj",t)});if("string"==typeof o&&0!==o.indexOf("_")){var t=s(this).data("toolbarObj");return t[o].apply(t,s.makeArray(arguments).slice(1))}},s.fn.toolbar.options={content:"#myContent",position:"top",hideOnClick:!1,zIndex:120,hover:!1,style:"default",animation:"standard",adjustment:10}}(jQuery,window,document);