
!function(d){var t='[data-toggle="context"]',s=function(t,e){this.$element=d(t),this.before=e.before||this.before,this.onItem=e.onItem||this.onItem,this.scopes=e.scopes||null,e.target&&this.$element.data("target",e.target),this.listen()};s.prototype={constructor:s,show:function(t){var e,n,o={relatedTarget:this,target:t.currentTarget};if(!this.isDisabled()&&(this.closemenu(),!1!==this.before.call(this,t,d(t.currentTarget))))return(e=this.getMenu()).trigger(d.Event("show.bs.context",o)),n=this.getPosition(t,e),"li:not(.divider)",e.attr("style","").css(n).addClass("open").on("click.context.data-api","li:not(.divider)",d.proxy(this.onItem,this,d(t.currentTarget))).trigger("shown.bs.context",o),d("html").on("click.context.data-api",e.selector,d.proxy(this.closemenu,this)),!1},closemenu:function(t){var e,n;(e=this.getMenu()).hasClass("open")&&(n={relatedTarget:this},e.trigger(d.Event("hide.bs.context",n)),"li:not(.divider)",e.removeClass("open").off("click.context.data-api","li:not(.divider)").trigger("hidden.bs.context",n),d("html").off("click.context.data-api",e.selector),t&&0===d(t.target).closest("a").length&&t.stopPropagation())},keydown:function(t){27==t.which&&this.closemenu(t)},before:function(t){return!0},onItem:function(t){return!0},listen:function(){this.$element.on("contextmenu.context.data-api",this.scopes,d.proxy(this.show,this)),d("html").on("click.context.data-api",d.proxy(this.closemenu,this)),d("html").on("keydown.context.data-api",d.proxy(this.keydown,this))},destroy:function(){this.$element.off(".context.data-api").removeData("context"),d("html").off(".context.data-api")},isDisabled:function(){return this.$element.hasClass("disabled")||this.$element.attr("disabled")},getMenu:function(){var t,e=this.$element.data("target");return e||(e=(e=this.$element.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,"")),(t=d(e))&&t.length?t:this.$element.find(e)},getPosition:function(t,e){var n,o,i,s=t.clientX,a=t.clientY,r=d(window).width(),c=d(window).height(),l=e.find(".dropdown-menu").outerWidth(),h=e.find(".dropdown-menu").outerHeight();return n=c<a+h?{top:a-h+d(window).scrollTop()}:{top:a+d(window).scrollTop()},o=r<s+l&&0<s-l?{left:s-l+d(window).scrollLeft()}:{left:s+d(window).scrollLeft()},i=e.offsetParent().offset(),o.left=o.left-i.left,n.top=n.top-i.top,d.extend({position:"absolute","z-index":9999},n,o)}},d.fn.contextmenu=function(o,i){return this.each(function(){var t=d(this),e=t.data("context"),n="object"==typeof o&&o;e||t.data("context",e=new s(t,n)),"string"==typeof o&&e[o].call(e,i)})},d.fn.contextmenu.Constructor=s,d(document).on("contextmenu.context.data-api",function(){d(t).each(function(){var t=d(this).data("context");t&&t.closemenu()})}).on("contextmenu.context.data-api",t,function(t){d(this).contextmenu("show",t),t.preventDefault(),t.stopPropagation()})}(jQuery);