<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title> Leaflet地图</title><link href="css/style.css" rel="stylesheet"><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,font-awesome,bootstrap,layer,haoutil,leaflet-src,esri-leaflet"></script><script src="../lib/leafletPlugins/textCollision/L.LabelTextCollision.js"></script></head><body><div id="map" class="map"></div><br><input type="checkbox" checked onclick="setCollisionDetection(this.checked)"> Collision detection<script>var map,labelTextCollision;function initMap(){var t=haoutil.system.getRequestByName("config","config/gcj.json");labelTextCollision=new L.LabelTextCollision({collisionFlg:!0}),L.src.createMap({id:"map",url:t,renderer:labelTextCollision,success:function(t,o){map=t,initWork()}})}function initWork(){L.polyline([[35.695786,139.749213],[35.696786,139.748213],[35.695786,139.747213]],{weight:12,color:"#fe57a1",text:"polylineText",textStyle:{stroke:!0,color:"#ff0000",font:"16px 'Microsoft Yahei'"}}).addTo(map);for(var t=L.featureGroup().addTo(map),o=0;o<1e3;o++){var e=getRandomLatLng(),a=L.circleMarker(e,{radius:2,weight:4,color:"#3388ff",text:"科技",textStyle:{stroke:!0,color:"#3388ff",font:"15px 'Microsoft Yahei'",offsetX:-70,offsetY:-10}}).bindPopup('<a href="http://www.baidu.cn" target="_blank">科技</a>');t.addLayer(a)}}function setCollisionDetection(t){labelTextCollision.options.collisionFlg=t,map.fitBounds(map.getBounds())}function getRandomLatLng(){var t=map.getBounds(),o=t.getSouthWest(),e=t.getNorthEast(),a=e.lng-o.lng,n=e.lat-o.lat;return L.latLng(o.lat+n*Math.random(),o.lng+a*Math.random())}$(document).ready(function(){initMap()})</script></body></html>