<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>Leaflet地图</title><link href="css/style.css" rel="stylesheet"><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,font-awesome,bootstrap,layer,haoutil,leaflet-src,esri-leaflet"></script><script src="../lib/leafletPlugins/OSMBuildings/OSMBuildings-Leaflet.js"></script></head><body><div id="map" class="map"></div><script>var map;function initMap(){var n=haoutil.system.getRequestByName("config","config/wgs84.json");L.src.createMap({id:"map",url:n,success:function(n,t){map=n,initWork()}})}function initWork(){var a;function t(n){var t=function(n){if(!a||!n)return null;for(var t=a.features,e=0;e<t.length;e++)if(t[e].properties.id===n)return t[e].properties.name}(n.feature);t=t||"<span style='color:red'>无数据</span>",L.popup().setContent(t).setLatLng(L.latLng(n.lat,n.lon)).openOn(map)}map.setView([39.916,116.45],16),$.get("../data/geojson/buildings-bj.json",function(n){a=n,new OSMBuildings(map).date(new Date(2017,5,15,17,30)).set(n).click(t)})}$(document).ready(function(){initMap()})</script></body></html>