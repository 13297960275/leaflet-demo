<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title> Leaflet地图</title><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,font-awesome,bootstrap,jquery.range,layer,haoutil,leaflet-src,esri-leaflet"></script><link href="css/style.css" rel="stylesheet"></head><body><div id="map" class="map"></div><div class="infoview">透明度 &nbsp; <label id="lblOpacity">100%</label> <input id="imgOpacity" type="range"></div><script src="../lib/leafletPlugins/_vector/Leaflet.ImageOverlay.Rotated.js"></script><script>var map,imgLayer;function initMap(){var a=haoutil.system.getRequestByName("config","config/gcj.json");L.src.createMap({id:"map",url:a,success:function(a,n){map=a,initWork()}})}function initWork(){$("#imgOpacity").range({min:0,max:100,step:1,value:100,onChange:function(a,n){$("#lblOpacity").html(n+"%"),updateOpacity(a/100)}});var a=map.convert2map([39.921668,116.385298]),n=map.convert2map([39.921874,116.395748]),t=map.convert2map([39.911645,116.385834]);imgLayer=L.imageOverlay.rotated("img/simple/gugong.jpg",a,n,t,{opacity:.8,interactive:!0}),map.addLayer(imgLayer);var i=L.divIcon({iconSize:[15,15]}),e=L.marker(a,{draggable:!0,icon:i}).bindTooltip("top-left").addTo(map),o=L.marker(n,{draggable:!0,icon:i}).bindTooltip("top-right").addTo(map),r=L.marker(t,{draggable:!0,icon:i}).bindTooltip("bottom-left").addTo(map);function g(){imgLayer.reposition(e.getLatLng(),o.getLatLng(),r.getLatLng())}e.on("drag dragend",g),o.on("drag dragend",g),r.on("drag dragend",g);var m=new L.LatLngBounds(a,n).extend(t);map.fitBounds(m)}function updateOpacity(a){null!=imgLayer&&imgLayer.setOpacity(a)}$(document).ready(function(){initMap()})</script></body></html>