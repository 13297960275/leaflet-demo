<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title> Leaflet地图</title><link href="css/style.css" rel="stylesheet"><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,font-awesome,bootstrap,layer,haoutil,leaflet-src,esri-leaflet"></script><style>.marker_animation{height:50px;width:50px;margin-left:-25px;margin-top:-25px;float:left;border-radius:25px;background:rgba(255,0,0,.9);transform:scale(0);animation:myfirst 3s;animation-iteration-count:infinite}@keyframes myfirst{to{transform:scale(3);background:rgba(0,0,0,0)}}.mars-popup-titile{position:absolute;top:0;left:0;right:0;border-radius:3px 0 0 3px;padding:0 80px 0 20px;height:42px;line-height:42px;font-size:16px;color:#fff;background-color:#20a0ff;border-bottom:1px solid #eee;overflow:hidden}.mars-popup-content{margin-top:52px;font-size:14px}.mars-popup-content label{margin:0 10px;min-width:50px}.leaflet-container a.leaflet-popup-close-button{padding:4px 20px 0 0;color:#fff}</style></head><body><div id="map" class="map"></div><script>var map;function initMap(){var i=haoutil.system.getRequestByName("config","config/gcj.json");L.src.createMap({id:"map",url:i,success:function(i,n){map=i,initWork()}})}function initWork(){for(var i=[],n=1;n<100;n++){var a={};a.nm=n,a.mc="第"+n+"号数据门",a.jd=110+10*Math.random()*(.5<Math.random()?-1:1),a.wd=28+5*Math.random()*(.5<Math.random()?-1:1),i.push(a)}new L.src.Marker({map:map,textShowZoom:13,minZoom:4,maxZoom:18,isCluster:!0,click:function(i){haoutil.msg("你单击了："+i.mc)},dblclick:function(i){haoutil.msg("你双击了："+i.mc)}}).showData(i,{name:{jd:"jd",wd:"wd",mc:"mc"},icon:function(i){return 1==i.nm?L.divIcon({iconSize:[0,0],popupAnchor:[0,-30],className:"",html:'<div  class="marker_animation" ></div><div style="margin-left: -25px; margin-top: -50px; width: 50px; height: 50px;"><img src="img/marker/c1.png" /></div>'}):L.icon({iconUrl:"img/marker/fx1.png",iconSize:[30,30],iconAnchor:[15,15]})},bindPopup:function(i){return'<div class="mars-popup-titile">'+i.mc+'</div><div class="mars-popup-content" ><div><label>编码</label>'+i.nm+"</div><div><label>经度</label>"+i.jd.toFixed(6)+"</div><div><label>纬度</label>"+i.wd.toFixed(6)+"</div></div>"}})}$(document).ready(function(){initMap()})</script></body></html>