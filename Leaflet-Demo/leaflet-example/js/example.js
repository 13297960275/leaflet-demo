$(document).ready(function(){initPage(),bindEvents();setTimeout(function(){$("img.chart-thumb").lazyload()},1e3)});var openTimer,exConfig=exampleConfig,containExamples=!1,thumbLocation=getThumbLocation();function initPage(){var e=$("ul#sidebar-menu"),t=$("#charts-list");for(var a in exConfig)e.append(createSideBarMenuItem(a,exConfig[a],containExamples)),t.append(createGalleryItem(a,exConfig[a]));resizeCharts(),initSelect(),sidebarScrollFix()}function initSelect(){if(-1===window.location.hash.indexOf("#")){var e=$("#sidebar li").first().children("a")[0].hash;window.location.hash=e||window.location.hash}scroll()}function createGalleryItem(e,t){if(t){var a=$("<li class='category' id='"+e+"'></li>");return t.name&&createGalleryItemTitle(e,t.name).appendTo(a),t.content&&createSubGalleryItem(t.content,e).appendTo(a),a}}function createSubGalleryItem(e,t){var a=$("<div class='category-content'></div>");for(var i in e){var n=e[i],l=$("<div class='box box-default color-palette-box' id='"+t+"-"+i+"'></div>");createSubGalleryItemTitle(i,n.name).appendTo(l),n.content&&createGalleryCharts(n.content).appendTo(l),l.appendTo(a)}return a}function createGalleryItemTitle(e,t){var a=sideBarIconConfig[e];return $("<h3 class='category-title' id='title_"+e+"'><i class='fa "+a+"'></i>&nbsp;&nbsp;"+t+"</h3>")}function createSubGalleryItemTitle(e,t){return $("<div class='box-header'><h3 class='box-title' id='category-type-"+e+"'>&nbsp;&nbsp;&nbsp;&nbsp;"+t+"</h4></h3></div>")}function createGalleryCharts(e){for(var t=$("<div class='box-body'></div>"),a=e&&e.length?e.length:0,i=0;i<a;i++)createGalleryChart(e[i]).appendTo(t);return t}function createGalleryChart(e){var t="../leaflet-example/editor.html",a=e.name,i=fileName2Id(e.fileName),n="../leaflet-example/nav/img/"+(e.thumbnail||"");e.params&&(t+="?"+e.params),e.noedit&&(-1==t.lastIndexOf("?")?t+="?noedit=1":t+="&noedit=1"),t=t+"#"+i,window.exampleOpenView&&(t=e.params?'javascript:openExampleView("'+t+'","'+a+'")':'javascript:openExampleView("../leaflet-example/'+i+'.html","'+a+'")');var l=$("<div class='col-xlg-2 col-lg-3 col-md-4 col-sm-6 col-xs-12'><a target='_blank' title='"+a+"' href='../leaflet-example/"+i+".html'></a></div>"),r=$("<div class='chart'></div>"),o=$("<a class='chart-link' target='_blank' href='"+t+"'></a>"),c=$("<h5 class='chart-title'>"+a+"</h5>"),s=$("<img class='chart-area' src='"+n+"' style='display: inline'>");return c.appendTo(o),s.appendTo(o),o.appendTo(r),r.appendTo(l),l}function openExampleView(e,t){var a=document.documentElement.clientWidth-230+"px",i=document.documentElement.clientHeight-60+"px",n=layer.open({type:2,title:t,fix:!0,maxmin:!0,shadeClose:!0,offset:["60px","230px"],area:[a,i],content:e,skin:"animation-scale-up",success:function(e){}});$("#layui-layer"+n+" .layui-layer-title").css({background:"#1E9FFF"})}function getThumbLocation(){var e=window.location.toString();return e.substr(0,e.lastIndexOf("/"))}function resizeCharts(){var e=$("#charts-list .chart .chart-area");e[0]&&e[0].offsetWidth?e.height(.8*e[0].offsetWidth):e.height(208),window.onresize=function(){resizeCharts()}}function scroll(){var e,t=window.location.hash;if(t&&-1!==t.indexOf("#")){var a=t.split("#")[1].split("-");1===a.length&&(e=$(".category-title#title_"+a[0]),selectMenu(a[0],a.length)),2==a.length&&(e=$("#category-type-"+a[1]),selectMenu(a[1],a.length))}e&&e.offset()&&$(window).animate({scrollTop:e.offset().top-60},0)}function bindEvents(){var e=$("ul#sidebar-menu>li.treeview>ul>li");$("ul.sidebar-menu>li").parent("ul");0==$("ul.sidebar-menu>li#firstMenuiManager").find("ul").length&&$("ul.sidebar-menu>li#firstMenuiManager").click(function(){$("ul#sidebar-menu>li>ul").slideUp(500)}),e.parent("ul").siblings("a").click(function(e){$(this).siblings("ul").is(":visible")&&$(this).siblings("ul").children("li").hasClass("active")&&e.stopPropagation(),window.location=e.currentTarget.href}),window.addEventListener("hashchange",function(){scroll()})}var animationSpeed=500;$(window).on("scroll",function(){if($("ul.sidebar-menu>li").hasClass("active")){var e=$("ul.sidebar-menu>li").parent("ul");openTimer&&clearTimeout(openTimer),openTimer=setTimeout(function(){e.children("li.active").children("ul").slideDown(animationSpeed,function(){e.children("li.active").children("ul").css("display","block")})},100)}$("ul.sidebar-menu>li").not("li.active").children("ul").css("display","none")});