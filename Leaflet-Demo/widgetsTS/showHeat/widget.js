L.widget.bindClass(L.widget.BaseWidget.extend({options:{resources:[],view:{type:"window",url:"view.html",windowOptions:{width:400,height:280}}},layerWork:null,create:function(){var n=this;$.getJSON("data/apidemo/heat.json",function(e){if(n.isActivate)if(0==e.Code){for(var t=e.Data,i=[],a=0;a<t.length;a++){var r=t[a];i.push([r.Y,r.X,r.Count])}n.addHeatLayer(i)}else toastr.error(e.Msg)})},viewWindow:null,winCreateOK:function(e,t){this.viewWindow=t},activate:function(){this.layerWork&&(map.addLayer(this.layerWork),map.fitBounds(this._mpts))},disable:function(){this.layerWork&&map.removeLayer(this.layerWork)},_mpts:null,addHeatLayer:function(e){this._mpts=e,this.layerWork=L.heatLayer(e,{minOpacity:.3,gradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"}}).addTo(map),map.fitBounds(e)}}));