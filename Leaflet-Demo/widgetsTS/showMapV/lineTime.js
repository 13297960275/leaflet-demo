L.widget.bindClass(L.widget.BaseWidget.extend({options:{},layerWork:null,create:function(){this.layerWork=L.featureGroup()},activate:function(){map.changeBaseMap("谷歌卫星"),map.addLayer(this.layerWork);var e=this;$.ajax({url:"data/apidemo/wuhan-car.txt",type:"GET",dataType:"text",success:function(a){e.isActivate&&e.showMapV(a)}})},disable:function(){map.changeBaseMap(0),map.removeLayer(this.layerWork)},showMapV:function(a){map.setView([30.41,114.32],11);var e=[],t=[];a=a.split("\n");for(var r=0,i=L.CRS.EPSG3857.projection,o=0;o<a.length;o++){var n=a[o].split(","),s=[];if(n.length>r&&(r=n.length),!(n.length<2)){for(j=0;j<n.length;j+=2){var l=i.unproject(L.point([n[j],n[j+1]]));s.push([l.lng,l.lat]),t.push({geometry:{type:"Point",coordinates:[l.lng,l.lat]},count:1,time:j})}s,e.push({geometry:{type:"LineString",coordinates:s}})}}var p=new mapv.DataSet(e);L.mapVLayer(p,{strokeStyle:"rgba(53,57,255,0.5)",shadowColor:"rgba(53,57,255,0.2)",shadowBlur:3,lineWidth:3,draw:"simple"}).addTo(this.layerWork);var d=new mapv.DataSet(t);L.mapVLayer(d,{fillStyle:"rgba(255, 250, 250, 0.2)",globalCompositeOperation:"lighter",size:1.5,animation:{stepsRange:{start:0,end:100},trails:3,duration:5},draw:"simple"}).addTo(this.layerWork)}}));