L.widget.bindClass(L.widget.BaseWidget.extend({options:{},layerWork:null,create:function(){this.layerWork=L.featureGroup()},activate:function(){map.changeBaseMap("谷歌卫星"),map.addLayer(this.layerWork),this.showMapV()},disable:function(){map.changeBaseMap(0),map.removeLayer(this.layerWork)},showMapV:function(){map.setView([36.64,108.15],5);for(var e={0:{x:108.154518,y:36.643346},1:{x:121.485124,y:31.235317}},a=[{source:"1",target:"0"}],t=["北京","天津","上海","重庆","石家庄","太原","呼和浩特","哈尔滨","长春","沈阳","济南","南京","合肥","杭州","南昌","福州","郑州","武汉","长沙","广州","南宁","西安","银川","兰州","西宁","乌鲁木齐","成都","贵阳","昆明","拉萨","海口"],r=1;r<500;r++){var o=mapv.utilCityCenter.getCenterByCityName(t[parseInt(Math.random()*t.length)]);e[r]={x:o.lng-5+10*Math.random(),y:o.lat-5+10*Math.random()},a.push({source:~~(r*Math.random()),target:"0"})}var i=mapv.utilForceEdgeBundling().nodes(e).edges(a)(),n=[],s=[];for(r=0;r<i.length;r++){for(var l=i[r],p=[],d=0;d<l.length;d++)p.push([l[d].x,l[d].y]),s.push({geometry:{type:"Point",coordinates:[l[d].x,l[d].y]},count:1,time:d});n.push({geometry:{type:"LineString",coordinates:p}})}var h=new mapv.DataSet(n);L.mapVLayer(h,{strokeStyle:"rgba(55, 50, 250, 0.3)",globalCompositeOperation:"lighter",shadowColor:"rgba(55, 50, 250, 0.5)",shadowBlur:10,methods:{click:function(e){}},lineWidth:1,draw:"simple"}).addTo(this.layerWork);var m=new mapv.DataSet(s);L.mapVLayer(m,{fillStyle:"rgba(255, 250, 250, 0.9)",globalCompositeOperation:"lighter",size:1.5,animation:{type:"time",stepsRange:{start:0,end:100},trails:1,duration:5},draw:"simple"}).addTo(this.layerWork)}}));