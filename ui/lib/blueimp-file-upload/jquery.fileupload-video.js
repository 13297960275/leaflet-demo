/* 2018-3-10 12:34:16 | 版权所有 合肥火星科技有限公司 http://www.marsgis.cn  【联系我们QQ：516584683，微信：marsgis】 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("load-image")):e(window.jQuery,window.loadImage)}(function(l,n){"use strict";l.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"}),l.widget("blueimp.fileupload",l.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(e,i){if(i.disabled)return e;var o,d,t=e.files[e.index];return this._videoElement.canPlayType&&this._videoElement.canPlayType(t.type)&&("number"!==l.type(i.maxFileSize)||t.size<=i.maxFileSize)&&(!i.fileTypes||i.fileTypes.test(t.type))&&(o=n.createObjectURL(t))&&((d=this._videoElement.cloneNode(!1)).src=o,d.controls=!0,e.video=d),e},setVideo:function(e,i){return e.video&&!i.disabled&&(e.files[e.index][i.name||"preview"]=e.video),e}}})});