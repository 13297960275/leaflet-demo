/* 2018-3-10 12:34:16 | 版权所有 合肥火星科技有限公司 http://www.marsgis.cn  【联系我们QQ：516584683，微信：marsgis】 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery)}(function(n){"use strict";var i=n.blueimp.fileupload.prototype.options.add;n.widget("blueimp.fileupload",n.blueimp.fileupload,{options:{processQueue:[],add:function(e,s){var r=n(this);s.process(function(){return r.fileupload("process",s)}),i.call(this,e,s)}},processActions:{},_processFile:function(e,i){var t=this,o=n.Deferred().resolveWith(t,[e]).promise();return this._trigger("process",null,e),n.each(e.processQueue,function(e,s){var r=function(e){return i.errorThrown?n.Deferred().rejectWith(t,[i]).promise():t.processActions[s.action].call(t,e,s)};o=o.then(r,s.always&&r)}),o.done(function(){t._trigger("processdone",null,e),t._trigger("processalways",null,e)}).fail(function(){t._trigger("processfail",null,e),t._trigger("processalways",null,e)}),o},_transformProcessQueue:function(t){var s=[];n.each(t.processQueue,function(){var r={},e=this.action,i=!0===this.prefix?e:this.prefix;n.each(this,function(e,s){"string"===n.type(s)&&"@"===s.charAt(0)?r[e]=t[s.slice(1)||(i?i+e.charAt(0).toUpperCase()+e.slice(1):e)]:r[e]=s}),s.push(r)}),t.processQueue=s},processing:function(){return this._processing},process:function(i){var t=this,o=n.extend({},this.options,i);return o.processQueue&&o.processQueue.length&&(this._transformProcessQueue(o),0===this._processing&&this._trigger("processstart"),n.each(i.files,function(e){var s=e?n.extend({},o):o,r=function(){return i.errorThrown?n.Deferred().rejectWith(t,[i]).promise():t._processFile(s,i)};s.index=e,t._processing+=1,t._processingQueue=t._processingQueue.then(r,r).always(function(){t._processing-=1,0===t._processing&&t._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=n.Deferred().resolveWith(this).promise()}})});