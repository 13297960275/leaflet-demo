
!function(t,i){"object"==typeof exports?module.exports=i():"function"==typeof define&&define.amd?define(i):t.Spinner=i()}(this,function(){"use strict";function m(t,i){var e,o=document.createElement(t||"div");for(e in i)o[e]=i[e];return o}function y(t){for(var i=1,e=arguments.length;i<e;i++)t.appendChild(arguments[i]);return t}function o(t,i){var e,o,n=t.style;for(i=i.charAt(0).toUpperCase()+i.slice(1),o=0;r.length>o;o++)if(void 0!==n[e=r[o]+i])return e;return void 0!==n[i]?i:void 0}function v(t,i){for(var e in i)t.style[o(t,e)||e]=i[e];return t}function i(t){for(var i=1;arguments.length>i;i++){var e=arguments[i];for(var o in e)void 0===t[o]&&(t[o]=e[o])}return t}function g(t,i){return"string"==typeof t?t:t[i%t.length]}function e(t){this.opts=i(t||{},e.defaults,n)}var w,t,r=["webkit","Moz","ms","O"],x={},b=(t=m("style",{type:"text/css"}),y(document.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};e.defaults={},i(e.prototype,{spin:function(t){this.stop();var e=this,o=e.opts,n=e.el=v(m(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex});if(o.radius,o.length,o.width,v(n,{left:o.left,top:o.top}),t&&t.insertBefore(n,t.firstChild||null),n.setAttribute("role","progressbar"),e.lines(n,e.opts),!w){var r,s=0,a=(o.lines-1)*(1-o.direction)/2,l=o.fps,d=l/o.speed,c=(1-o.opacity)/(d*o.trail/100),p=d/o.lines;!function t(){s++;for(var i=0;o.lines>i;i++)r=Math.max(1-(s+(o.lines-i)*p)%d*c,o.opacity),e.opacity(n,i*o.direction+a,r,o);e.timeout=e.el&&setTimeout(t,~~(1e3/l))}()}return e},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(t,e){function i(t,i){return v(m(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*n+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var o,n=0,r=(e.lines-1)*(1-e.direction)/2;e.lines>n;n++)o=v(m(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:w&&(s=e.opacity,a=e.trail,l=r+n*e.direction,d=e.lines,void 0,void 0,void 0,void 0,void 0,c=["opacity",a,~~(100*s),l,d].join("-"),p=.01+l/d*100,u=Math.max(1-(1-s)/a*(100-p),s),f=w.substring(0,w.indexOf("Animation")).toLowerCase(),h=f&&"-"+f+"-"||"",x[c]||(b.insertRule("@"+h+"keyframes "+c+"{0%{opacity:"+u+"}"+p+"%{opacity:"+s+"}"+(p+.01)+"%{opacity:1}"+(p+a)%100+"%{opacity:"+s+"}100%{opacity:"+u+"}}",b.cssRules.length),x[c]=1),c+" "+1/e.speed+"s linear infinite")}),e.shadow&&y(o,v(i("#000","0 0 4px #000"),{top:"2px"})),y(t,y(o,i(g(e.color,n),"0 0 1px rgba(0,0,0,.1)")));var s,a,l,d,c,p,u,f,h;return t},opacity:function(t,i,e){t.childNodes.length>i&&(t.childNodes[i].style.opacity=e)}});var s=v(m("group"),{behavior:"url(#default#VML)"});return!o(s,"transform")&&s.adj?function(){function d(t,i){return m("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}b.addRule(".spin-vml","behavior:url(#default#VML)"),e.prototype.lines=function(t,o){function n(){return v(d("group",{coordsize:s+" "+s,coordorigin:-r+" "+-r}),{width:s,height:s})}function i(t,i,e){y(l,y(v(n(),{rotation:360/o.lines*t+"deg",left:~~i}),y(v(d("roundrect",{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:e}),d("fill",{color:g(o.color,t),opacity:o.opacity}),d("stroke",{opacity:0}))))}var e,r=o.length+o.width,s=2*r,a=2*-(o.width+o.length)+"px",l=v(n(),{position:"absolute",top:a,left:a});if(o.shadow)for(e=1;o.lines>=e;e++)i(e,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(e=1;o.lines>=e;e++)i(e);return y(t,l)},e.prototype.opacity=function(t,i,e,o){var n=t.firstChild;o=o.shadow&&o.lines||0,n&&n.childNodes.length>i+o&&(n=(n=(n=n.childNodes[i+o])&&n.firstChild)&&n.firstChild)&&(n.opacity=e)}}():w=o(s,"animation"),e});