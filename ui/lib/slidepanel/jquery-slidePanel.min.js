
!function(p,l,d,c){"use strict";function g(){return void 0!==d.performance&&d.performance.now?d.performance.now():Date.now()}function t(a,i,h,n){function l(t,i){return 1-3*i+3*t}function c(t,i){return 3*i-6*t}function u(t){return 3*t}function p(t,i,n){return((l(i,n)*t+c(i,n))*t+u(i))*t}return a===i&&h===n?{css:"linear",fn:function(t){return t}}:{css:"cubic-bezier("+a+","+i+","+h+","+n+")",fn:function(t){return p(function(t){for(var i=t,n=0;n<4;++n){var e=(s=i,3*l(o=a,r=h)*s*s+2*c(o,r)*s+u(o));if(0===e)return i;i-=(p(i,a,h)-t)/e}var s,o,r;return i}(t),i,n)}}}function n(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}function e(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}function s(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}function o(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}var r=p.slidePanel=function(){r.show.apply(this,arguments)};Date.now||(Date.now=function(){return(new Date).getTime()});for(var i=["webkit","moz"],a=0;a<i.length&&!d.requestAnimationFrame;++a){var h=i[a];d.requestAnimationFrame=d[h+"RequestAnimationFrame"],d.cancelAnimationFrame=d[h+"CancelAnimationFrame"]||d[h+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS (6|7|8)/.test(d.navigator.userAgent)||!d.requestAnimationFrame||!d.cancelAnimationFrame){var u=0;d.requestAnimationFrame=function(t){var i=g(),n=Math.max(u+16,i);return setTimeout(function(){t(u=n)},n-i)},d.cancelAnimationFrame=clearTimeout}var f=function(){function i(t,i){var n=!1,e=t.charAt(0).toUpperCase()+t.slice(1);return s[t]!==c&&(n=t),n||p.each(o,function(t,i){return s[i+e]!==c?(n="-"+i.toLowerCase()+"-"+e,!1):void 0}),i?n:!!n}function t(t){return i(t,!0)}var s=p("<support>").get(0).style,o=["webkit","Moz","O","ms"],n={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},e=function(){return!!i("transform")},r=function(){return!!i("perspective")},a=function(){return!!i("animation")},h={};return function(){return!!i("transition")}()&&(h.transition=new String(t("transition")),h.transition.end=n.transition.end[h.transition]),a()&&(h.animation=new String(t("animation")),h.animation.end=n.animation.end[h.animation]),e()&&(h.transform=new String(t("transform")),h.transform3d=r()),h.touch=!!("ontouchstart"in d||d.DocumentTouch&&l instanceof d.DocumentTouch),h.pointer=!(!d.PointerEvent&&!d.MSPointerEvent),h.prefixPointerEvent=function(t){return d.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},h}(),m={ease:t(.25,.1,.25,1),linear:t(0,0,1,1),"ease-in":t(.42,0,1,1),"ease-out":t(0,0,.58,1),"ease-in-out":t(.42,0,.58,1)};r.options={skin:null,classes:{base:"slidePanel",show:"slidePanel-show",loading:"slidePanel-loading",content:"slidePanel-content",dragging:"slidePanel-dragging",willClose:"slidePanel-will-close"},closeSelector:null,template:function(t){return'<div class="'+t.classes.base+" "+t.classes.base+"-"+t.direction+'"><div class="'+t.classes.content+'"></div></div>'},loading:{appendTo:"panel",template:function(t){return'<div class="'+t.classes.loading+'"></div>'},showCallback:function(t){this.$el.addClass(t.classes.loading+"-show")},hideCallback:function(t){this.$el.removeClass(t.classes.loading+"-show")}},contentFilter:function(t){return t},useCssTransforms3d:!0,useCssTransforms:!0,useCssTransitions:!0,dragTolerance:150,mouseDragHandler:null,mouseDrag:!0,touchDrag:!0,pointerDrag:!0,direction:"right",duration:"500",easing:"ease",beforeLoad:p.noop,afterLoad:p.noop,beforeShow:p.noop,afterShow:p.noop,onChange:p.noop,beforeChange:p.noop,beforeHide:p.noop,afterHide:p.noop,beforeDrag:p.noop,afterDrag:p.noop},p.extend(n.prototype,{initialize:function(t){this.options=t,this._instance=null,this._showed=!1,this._isLoading=!1,this.build()},setLength:function(){switch(this.options.direction){case"top":case"bottom":this._length=this.$panel.outerHeight();break;case"left":case"right":this._length=this.$panel.outerWidth()}},build:function(){if(!this._builded){var t=this.options,i=t.template.call(this,t),n=this;this.$panel=p(i).appendTo("body"),t.skin&&this.$panel.addClass(t.skin),this.$content=this.$panel.find("."+this.options.classes.content),t.closeSelector&&this.$panel.on("click",t.closeSelector,function(){return n.hide(),!1}),this.loading=new e(this),this.setLength(),this.setPosition(this.getHidePosition()),(t.mouseDrag||t.touchDrag||t.pointerDrag)&&(this.drag=new s(this)),this._builded=!0}},getHidePosition:function(){var t=this.options;if(t.useCssTransforms||t.useCssTransforms3d)switch(t.direction){case"top":case"left":return"-100";case"bottom":case"right":return"100"}else switch(t.direction){case"top":case"bottom":return parseFloat(-this._length/p(d).height()*100,10);case"left":case"right":return parseFloat(-this._length/p(d).width()*100,10)}},empty:function(){this._instance=null,this.$content.empty()},load:function(i){function n(t){t=s.contentFilter.call(this,t,i),e.$content.html(t),e.hideLoading(),e._instance=i,w.trigger(e,"afterLoad",i)}var e=this,s=i.options;this._instance,w.trigger(this,"beforeLoad",i),this.empty(),i.content?n(i.content):i.url?(this.showLoading(),p.ajax(i.url,i.settings||{}).done(function(t){n(t)})):n("")},showLoading:function(){var t=this;this.loading.show(function(){t._isLoading=!0})},hideLoading:function(){var t=this;this.loading.hide(function(){t._isLoading=!1})},show:function(t){this.build(),w.enter("show"),w.trigger(this,"beforeShow"),p("html").addClass(this.options.classes.base+"-html"),this.$panel.addClass(this.options.classes.show);var i=this;v.do(this,0,function(){i._showed=!0,w.trigger(i,"afterShow"),p.isFunction(t)&&t.call(i)})},change:function(t){w.trigger(this,"beforeShow"),w.trigger(this,"onChange",t,this._instance),this.load(t),w.trigger(this,"afterShow")},revert:function(t){var i=this;v.do(this,0,function(){p.isFunction(t)&&t.call(i)})},hide:function(t){w.leave("show"),w.trigger(this,"beforeHide");var i=this;v.do(this,this.getHidePosition(),function(){i.$panel.removeClass(i.options.classes.show),i._showed=!1,i._instance=null,w._current===i&&(w._current=null),w.is("show")||p("html").removeClass(i.options.classes.base+"-html"),p.isFunction(t)&&t.call(i),w.trigger(i,"afterHide")})},makePositionStyle:function(t){var i,n,e,s="0",o="0";"string"==typeof(e=t)&&-1!=e.indexOf("%")||"string"==typeof(n=t)&&-1!=n.indexOf("px")||(t+="%"),this.options.useCssTransforms&&f.transform?("left"===this.options.direction||"right"===this.options.direction?s=t:o=t,i=f.transform.toString(),t=this.options.useCssTransforms3d&&f.transform3d?"translate3d("+s+","+o+",0)":"translate("+s+","+o+")"):i=this.options.direction;var r={};return r[i]=t,r},getPosition:function(t){var i,n;if(this.options.useCssTransforms&&f.transform){if(!(i=!(!(n=this.$panel.css(f.transform))||"matrix"!=n.substr(0,6))&&n.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)))return 0;i="left"===this.options.direction||"right"===this.options.direction?i[12]||i[4]:i[13]||i[5]}else i=this.$panel.css(this.options.direction),i=parseFloat(i.replace("px",""));return!0!==t&&(i=i/this._length*100),parseFloat(i,10)},setPosition:function(t){var i=this.makePositionStyle(t);this.$panel.css(i)}}),p.extend(e.prototype,{initialize:function(t){this._view=t,this.build()},build:function(){if(!this._builded){var t=this._view.options,i=t.loading.template.call(this,t);switch(this.$el=p(i),t.loading.appendTo){case"panel":this.$el.appendTo(this._view.$panel);break;case"body":this.$el.appendTo("body");break;default:this.$el.appendTo(t.loading.appendTo)}this._builded=!0}},show:function(t){this.build();var i=this._view.options;i.loading.showCallback.call(this,i),p.isFunction(t)&&t.call(this)},hide:function(t){var i=this._view.options;i.loading.hideCallback.call(this,i),p.isFunction(t)&&t.call(this)}});var v={prepareTransition:function(t,i,n,e,s){var o=[];i&&o.push(i),n&&(p.isNumeric(n)&&(n+="ms"),o.push(n)),o.push(e||this.easing.css),s&&o.push(s),t.css(f.transition,o.join(" "))},do:function(e,t,s){w.enter("animating");var i=e.options.duration,o=e.options.easing||"ease",r=this,n=e.makePositionStyle(t);for(var a in n)break;if(e.options.useCssTransitions&&f.transition)setTimeout(function(){r.prepareTransition(e.$panel,a,i,o)},20),e.$panel.one(f.transition.end,function(){p.isFunction(s)&&s(),e.$panel.css(f.transition,""),w.leave("animating")}),setTimeout(function(){e.setPosition(t)},20);else{var h=g(),l=e.getPosition(),c=t,u=function(t){var i=(t-h)/e.options.duration;1<i&&(i=1),i=m[o].fn(i);var n=parseFloat(l+i*(c-l),10);e.setPosition(n),1===i?(d.cancelAnimationFrame(r._frameId),r._frameId=null,p.isFunction(s)&&s(),w.leave("animating")):r._frameId=d.requestAnimationFrame(u)};r._frameId=d.requestAnimationFrame(u)}}};p.extend(s.prototype,{initialize:function(t){this._view=t,this.options=t.options,this._drag={time:null,pointer:null},this.bindEvents()},bindEvents:function(){var t=this.options,i=this._view.$panel;t.mouseDrag&&(i.on(w.eventName("mousedown"),p.proxy(this.onDragStart,this)),i.on(w.eventName("dragstart selectstart"),function(){return!(!t.mouseDragHandler||p(event.target).is(t.mouseDragHandler)||0<p(event.target).parents(t.mouseDragHandler).length)&&void 0})),t.touchDrag&&f.touch&&(i.on(w.eventName("touchstart"),p.proxy(this.onDragStart,this)),i.on(w.eventName("touchcancel"),p.proxy(this.onDragEnd,this))),t.pointerDrag&&f.pointer&&(i.on(w.eventName(f.prefixPointerEvent("pointerdown")),p.proxy(this.onDragStart,this)),i.on(w.eventName(f.prefixPointerEvent("pointercancel")),p.proxy(this.onDragEnd,this)))},onDragStart:function(t){var i=this;if(3!==t.which){var n=this.options;this._view.$panel.addClass(this.options.classes.dragging),this._position=this._view.getPosition(!0),this._drag.time=(new Date).getTime(),this._drag.pointer=this.pointer(t);var e=function(){w.enter("dragging"),w.trigger(i._view,"beforeDrag")};if(n.mouseDrag){if(n.mouseDragHandler&&!(p(t.target).is(n.mouseDragHandler)||0<p(t.target).parents(n.mouseDragHandler).length))return;p(l).on(w.eventName("mouseup"),p.proxy(this.onDragEnd,this)),p(l).one(w.eventName("mousemove"),p.proxy(function(){p(l).on(w.eventName("mousemove"),p.proxy(this.onDragMove,this)),e()},this))}n.touchDrag&&f.touch&&(p(l).on(w.eventName("touchend"),p.proxy(this.onDragEnd,this)),p(l).one(w.eventName("touchmove"),p.proxy(function(){p(l).on(w.eventName("touchmove"),p.proxy(this.onDragMove,this)),e()},this))),n.pointerDrag&&f.pointer&&(p(l).on(w.eventName(f.prefixPointerEvent("pointerup")),p.proxy(this.onDragEnd,this)),p(l).one(w.eventName(f.prefixPointerEvent("pointermove")),p.proxy(function(){p(l).on(w.eventName(f.prefixPointerEvent("pointermove")),p.proxy(this.onDragMove,this)),e()},this))),p(l).on(w.eventName("blur"),p.proxy(this.onDragEnd,this)),t.preventDefault()}},onDragMove:function(t){var i=this.distance(this._drag.pointer,this.pointer(t));w.is("dragging")&&(Math.abs(i)>this.options.dragTolerance?!0!==this._willClose&&(this._willClose=!0,this._view.$panel.addClass(this.options.classes.willClose)):!1!==this._willClose&&(this._willClose=!1,this._view.$panel.removeClass(this.options.classes.willClose)),w.is("dragging")&&(t.preventDefault(),this.move(i)))},onDragEnd:function(t){var i=this.distance(this._drag.pointer,this.pointer(t));p(l).off(w.eventName("mousemove mouseup touchmove touchend pointermove pointerup MSPointerMove MSPointerUp blur")),this._view.$panel.removeClass(this.options.classes.dragging),!0===this._willClose&&(this._willClose=!1,this._view.$panel.removeClass(this.options.classes.willClose)),w.is("dragging")&&(w.leave("dragging"),w.trigger(this._view,"afterDrag"),Math.abs(i)<this.options.dragTolerance?this._view.revert():w.hide())},pointer:function(t){var i={x:null,y:null};return(t=(t=t.originalEvent||t||d.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i},distance:function(t,i){var n=this.options.direction;return"left"===n||"right"===n?i.x-t.x:i.y-t.y},move:function(t){var i=this._position+t;if("right"===this.options.direction||"bottom"===this.options.direction){if(i<0)return}else if(0<i)return;this.options.useCssTransforms||this.options.useCssTransforms3d||("right"===this.options.direction||"bottom"===this.options.direction)&&(i=-i),this._view.setPosition(i+"px")}}),p.extend(o.prototype,{initialize:function(t){var i=arguments[1]||{};if("string"==typeof t)t={url:t};else if(t&&1==t.nodeType){var n=p(t);t={url:n.attr("href"),settings:n.data("settings")||{},options:n.data()||{}}}return t.options=t&&t.options?p.extend(!0,i,t.options):i,t.options=p.extend(!0,{},r.options,t.options),p.extend(this,t),this}});var w={_states:{},_views:{},_current:null,is:function(t){return this._states[t]&&0<this._states[t]},enter:function(t){this._states[t]===c&&(this._states[t]=0),this._states[t]++},leave:function(t){this._states[t]--},trigger:function(t,i){var n=Array.prototype.slice.call(arguments,2),e=[t].concat(n);p(l).trigger("slidePanel::"+i,e),p.isFunction(t.options[i])&&t.options[i].apply(t,n)},eventName:function(t){if("string"!=typeof t||""===t)return".slidepanel";for(var i=(t=t.split(" ")).length,n=0;n<i;n++)t[n]=t[n]+".slidepanel";return t.join(" ")},show:function(t){if(!(t instanceof o))switch(arguments.length){case 0:t=new o;break;case 1:t=new o(arguments[0]);break;case 2:t=new o(arguments[0],arguments[1])}var i=this.getView(t.options),n=this,e=function(){i.show(),i.load(t),n._current=i};null!==this._current?i===this._current?this._current.change(t):this._current.hide(e):e()},getView:function(t){var i=function(t){"string"!=typeof t&&(t=JSON.stringify(t));var i,n,e=0;if(0===t.length)return e;for(i=0,n=t.length;i<n;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}(t);return this._views.hasOwnProperty(i)?this._views[i]:this._views[i]=new n(t)},hide:function(t){t?this.getView(t.options).hide():null!==this._current&&this._current.hide()}};p.extend(r,{is:function(t){return w.is(t)},show:function(){return w.show.apply(w,arguments),this},hide:function(){return w.hide.apply(w,arguments),this}}),p.fn.slidePanel=function(t){if("string"==typeof t){var i=t,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=p.data(this,"slidePanel");switch(t instanceof o||(t=new o(this,n),p.data(this,"slidePanel",t)),i){case"hide":w.hide(t);break;case"show":w.show(t)}})}return this.each(function(){p.data(this,"slidePanel")||(p.data(this,"slidePanel",new o(this,t)),p(this).on("click",function(t){var i=p.data(this,"slidePanel");w.show(i),t.preventDefault(),t.stopPropagation()}))})}}(jQuery,document,window);