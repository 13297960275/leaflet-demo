<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>Leaflet地图</title><link href="css/style.css" rel="stylesheet"><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,font-awesome,bootstrap,layer,haoutil,leaflet-mars,esri-leaflet"></script><link href="../lib/leafletPlugins/_controls/overviewmap/Control.MiniMap.css" rel="stylesheet"><script src="../lib/leafletPlugins/_controls/overviewmap/Control.MiniMap.js"></script></head><body><div id="map" class="map"></div><script>var map;function initMap(){var a=haoutil.system.getRequestByName("config","config/gcj.json");L.mars.createMap({id:"map",url:a,success:function(a,i){map=a,initWork()}})}function initWork(){for(var a in map.gisdata.controls)map.removeControl(map.gisdata.controls[a]);var i,o=map.gisdata.config.basemaps;for(a=o.length-1;0<=a;a--){var e=o[a];if(null!=e._layer&&(e.hasOwnProperty("visible")&&e.visible)){i=e._layer;break}}if(null!=i){i=L.mars.layer.cloneLayer(i);var n=new L.Control.MiniMap(i,{position:"bottomright",toggleDisplay:!0,minimized:!1,aimingRectOptions:{color:"#ff1100",weight:2},shadowRectOptions:{color:"#0000AA",weight:1,opacity:0,fillOpacity:0}}).addTo(map);map.on("baselayerchange",function(a){var i=L.mars.layer.cloneLayer(a.layer);n.changeLayer(i)})}else haoutil.msg("当前无显示底图图层！")}$(document).ready(function(){initMap()})</script></body></html>