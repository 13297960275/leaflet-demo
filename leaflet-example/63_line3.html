
<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>Leaflet地图</title><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,layer,haoutil,echarts-forleaflet,leaflet-mars,esri-leaflet"></script><link href="css/style.css" rel="stylesheet"></head><body><div id="map" class="map"></div><script>var map;function initMap(){var a=haoutil.system.getRequestByName("config","config/gcj.json");L.mars.createMap({id:"map",url:a,success:function(a,e){map=a,initWork()}})}function initWork(){workEcharts.create(map),workEcharts.activate()}$(document).ready(function(){initMap()});var workEcharts={layerWork:null,create:function(a){this.map=a,this.path=""},activate:function(){map.setView([33.652,107.661],4),map.changeBaseMap(1);this.showData({"武汉":[114.30539299999998,30.593099],"深圳":[114.05786499999999,22.543096],"北京":[116.40739499999995,39.904211],"阿克苏":[80.26338699999997,41.167548]})},disable:function(){map.removeLayer(this.layerWork),map.changeBaseMap(0),this.layerWork=null},showData:function(a){var e=this.getOption(a);null==this.layerWork?this.layerWork=L.flowEcharts(e).addTo(map):(this.layerWork._echartsOption=e,this.layerWork.redraw())},getOption:function(a){return{backgroundColor:"rgba(17, 19, 42, 0.4)",geo:{map:"",roam:!0},series:[{type:"lines",coordinateSystem:"geo",zlevel:1,data:[{name:"武汉",toname:"北京",coords:[a["武汉"],a["北京"]]},{name:"深圳",toname:"北京",coords:[a["深圳"],a["北京"]]},{name:"阿克苏",toname:"北京",coords:[a["阿克苏"],a["北京"]]}],effect:{show:!0,period:6,trailLength:.7,color:"#fff",symbolSize:4},lineStyle:{normal:{width:"",color:"#a6c84c",curveness:.2}}},{type:"effectScatter",coordinateSystem:"geo",zlevel:3,data:[{name:"北京",value:a["北京"].concat(200)}],rippleEffect:{period:10,scale:5,brushType:"fill"}}]}}}</script></body></html>