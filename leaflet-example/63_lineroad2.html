<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>Leaflet地图</title><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,layer,haoutil,echarts-forleaflet,leaflet-mars,esri-leaflet"></script><link href="css/style.css" rel="stylesheet"></head><body><div id="map" class="map"></div><script>var map;function initMap(){var a=haoutil.system.getRequestByName("config","config/gcj.json");L.mars.createMap({id:"map",url:a,success:function(a,t){map=a,initWork()}})}function initWork(){workEcharts.create(map),workEcharts.activate()}$(document).ready(function(){initMap()});var workEcharts={layerWork:null,create:function(a){this.map=a,this.path=""},activate:function(){map.setView([39.907,116.377],10),map.changeBaseMap(1);var t=this;$.getJSON("../data/apidemo/bjgj.json",function(a){t.showData(a)})},disable:function(){map.removeLayer(this.layerWork),map.changeBaseMap(0),this.layerWork=null},showData:function(a){var t=this.getOption(a);null==this.layerWork?this.layerWork=L.flowEcharts(t).addTo(map):(this.layerWork._echartsOption=t,this.layerWork.redraw())},getOption:function(a){var c=300/(a.length-1),t=[].concat.apply([],a.map(function(a,t){for(var e,o=[],r=0;r<a.length;r+=2){var n=[a[r],a[r+1]];0<r&&(n=[e[0]+n[0],e[1]+n[1]]);var i=(e=n)[0]/1e4,s=n[1]/1e4,l=L.mars.pointconvert.bd2gcj([i,s]);i=l[0],s=l[1],o.push([i,s])}return{coords:o,lineStyle:{normal:{color:echarts.color.modifyHSL("#5A94DF",Math.round(c*t))}}}}));return option={backgroundColor:"rgba(17, 19, 42, 0.7)",animation:!0,geo:{map:"",roam:!0},series:[{type:"lines",coordinateSystem:"geo",polyline:!0,data:t,silent:!0,lineStyle:{normal:{opacity:.2,width:1}},progressiveThreshold:500,progressive:200},{type:"lines",coordinateSystem:"geo",polyline:!0,data:t,lineStyle:{normal:{width:0}},effect:{constantSpeed:20,show:!0,trailLength:.1,symbolSize:1.5},zlevel:1}]},option}}</script></body></html>