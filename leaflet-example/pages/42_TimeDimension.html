
<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>Leaflet地图</title><link href="css/style.css" rel="stylesheet"><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,font-awesome,bootstrap,layer,haoutil,leaflet-src,esri-leaflet"></script><script src="../lib/leafletPlugins/timedimension/iso8601.min.js"></script><script src="../lib/leafletPlugins/timedimension/leaflet-omnivore.min.js"></script><link href="../lib/leafletPlugins/timedimension/leaflet.timedimension.control.css" rel="stylesheet"><script src="../lib/leafletPlugins/timedimension/leaflet.timedimension.js"></script><style>.leaflet-bottom{bottom:50px}</style></head><body><div id="map" class="map"></div><script>var map;function initMap(){var n=haoutil.system.getRequestByName("config","config/gcj.json");L.src.createMap({id:"map",url:n,success:function(n,i){map=n,initWork()}})}function initWork(){var n=new L.TimeDimension({period:"PT5M"});map.timeDimension=n;var i={player:new L.TimeDimension.Player({transitionTime:100,loop:!1,startOver:!0},n),timeDimension:n,position:"bottomleft",autoPlay:!0,minSpeed:1,speedStep:1,maxSpeed:100,timeSliderDragUpdate:!0},e=new L.Control.TimeDimension(i);map.addControl(e);var o=L.icon({iconUrl:"img/marker/running.png",iconSize:[22,22],iconAnchor:[5,25]});$.getJSON("../data/geojson/tianzhushan.json",function(n){var i=L.geoJson(n,{pointToLayer:function(n,i){return n.properties.hasOwnProperty("last")?new L.Marker(i,{icon:o}):L.circleMarker(i)}});map.fitBounds(i.getBounds(),{paddingBottomRight:[40,40]}),L.timeDimension.layer.geoJson(i,{updateTimeDimension:!0,addlastPoint:!0,waitForReady:!0}).addTo(map)})}$(document).ready(function(){initMap()})</script></body></html>