
<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>Leaflet地图</title><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,layer,haoutil,mapV,leaflet-mars,esri-leaflet"></script><link href="css/style.css" rel="stylesheet"></head><body><div id="map" class="map"></div><script>var map;function initMap(){var a=haoutil.system.getRequestByName("config","config/gcj.json");L.mars.createMap({id:"map",url:a,success:function(a,e){map=a,initWork()}})}function initWork(){workMapV.create(map),workMapV.activate()}$(document).ready(function(){initMap()});var workMapV={layerWork:null,create:function(a){this.map=a,this.path="",this.layerWork=L.featureGroup()},activate:function(){map.changeBaseMap(1),map.addLayer(this.layerWork);var e=this;$.ajax({url:"../data/apidemo/weibo.json",type:"GET",dataType:"json",success:function(a){e.showMapV(a)}})},disable:function(){map.changeBaseMap(0),map.removeLayer(this.layerWork)},showMapV:function(a){map.setView([38.028658,105.403119],4);for(var e=[],t=[],o=[],i=0;i<a[0].length;i++){var r=a[0][i].geoCoord;e.push({geometry:{type:"Point",coordinates:r}})}for(i=0;i<a[1].length;i++){r=a[1][i].geoCoord;t.push({geometry:{type:"Point",coordinates:r},time:10*Math.random()})}for(i=0;i<a[2].length;i++){r=a[2][i].geoCoord;o.push({geometry:{type:"Point",coordinates:r}})}var n=new mapv.DataSet(e),s={fillStyle:"rgba(200, 200, 0, 0.8)",bigData:"Point",size:.7,draw:"simple"};L.mapVLayer(n,s).addTo(this.layerWork);n=new mapv.DataSet(t),s={fillStyle:"rgba(255, 250, 0, 0.8)",size:.7,bigData:"Point",draw:"simple"};L.mapVLayer(n,s).addTo(this.layerWork);n=new mapv.DataSet(o),s={fillStyle:"rgba(255, 250, 250, 0.6)",size:.7,bigData:"Point",draw:"simple"};L.mapVLayer(n,s).addTo(this.layerWork);n=new mapv.DataSet(t),s={fillStyle:"rgba(255, 250, 250, 0.9)",size:1.1,draw:"simple",bigData:"Point",animation:{stepsRange:{start:0,end:10},trails:1,duration:6}};L.mapVLayer(n,s).addTo(this.layerWork)}}</script></body></html>