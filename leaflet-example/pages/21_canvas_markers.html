<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title> Leaflet地图</title><link href="css/style.css" rel="stylesheet"><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,font-awesome,bootstrap,layer,haoutil,leaflet-src,esri-leaflet"></script></head><body><div id="map" class="map"></div><script src="../lib/leafletPlugins/canvas-marker/leaflet.canvas-markers.js"></script><script>var map;function initMap(){var a=haoutil.system.getRequestByName("config","config/gcj.json");L.src.createMap({id:"map",url:a,preferCanvas:!0,success:function(a,n){map=a,initWork()}})}function initWork(){haoutil.msg("渲染了1万个点");for(var a=L.canvasIconLayer({}).addTo(map),n=L.icon({iconUrl:"img/marker/fx1.png",iconSize:[20,20],iconAnchor:[10,10]}),t=0;t<1e4;t++){var o=getRandomLatLng(),r=L.marker(o,{icon:n}).bindPopup("第"+t+"个点");a.addLayer(r)}if(map.gisdata.controls&&map.gisdata.controls.layers)map.gisdata.controls.layers.addOverlay(a,"canvas点");else{var e={"canvas点":a};L.control.layers({},e,{position:"topleft"}).addTo(map)}}function getRandomLatLng(){var a=map.getBounds().pad(4),n=a.getSouthWest(),t=a.getNorthEast(),o=t.lng-n.lng,r=t.lat-n.lat;return L.latLng(n.lat+r*Math.random(),n.lng+o*Math.random())}$(document).ready(function(){initMap()})</script></body></html>