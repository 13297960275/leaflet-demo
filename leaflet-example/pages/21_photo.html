<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"><meta name="x5-fullscreen" content="true"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>Leaflet地图</title><link href="css/style.css" rel="stylesheet"><script src="../lib/include-lib.js" libpath="../lib/" include="jquery,font-awesome,bootstrap,layer,haoutil,leaflet-src,esri-leaflet"></script><link href="../lib/leafletPlugins/photo/Leaflet.Photo.css" rel="stylesheet"><script src="../lib/leafletPlugins/photo/Leaflet.Photo.js"></script></head><body><div id="map" class="map"></div><script>var map;function initMap(){var t=haoutil.system.getRequestByName("config","config/gcj.json");L.src.createMap({id:"map",url:t,success:function(t,a){map=t,initWork()}})}function initWork(){for(var t=[],a=1;a<30;a++){var n=getRandomLatLng(),o={};o.nm=a,o.mc="第"+a+"号数据门",o.lat=n.lat,o.lng=n.lng,o.thumbnail="img/photo/test.jpg",t.push(o)}var e=L.photo.cluster({spiderfyDistanceMultiplier:1.2}).on("click",function(t){var a=L.Util.template('<div style="width:250px;text-align: center;"><h4>{mc}</h4><br/><img src="{thumbnail}" /></div>',t.layer.photo);t.layer.bindPopup(a,{className:"leaflet-popup-photo"}).openPopup()});e.add(t).addTo(map),map.flyToBounds(e.getBounds())}function getRandomLatLng(){var t=map.getBounds(),a=t.getSouthWest(),n=t.getNorthEast(),o=n.lng-a.lng,e=n.lat-a.lat;return L.latLng(a.lat+e*Math.random(),a.lng+o*Math.random())}$(document).ready(function(){initMap()})</script></body></html>