L.widget.bindClass(L.widget.BaseWidget.extend({options:{view:{type:"window",url:"view.html",windowOptions:{width:600,height:300}}},create:function(){},viewWindow:null,winCreateOK:function(e,t){this.viewWindow=t},activate:function(){var t=this,e=this.config.data||"shi.json";$.getJSON(this.path+"data/"+e,function(e){t.isActivate&&t.showGeoJson(e)})},disable:function(){this.layerWork&&(map.removeLayer(this.layerWork),this.layerWork=null)},layerWork:null,arrSelect:[],arrSelectName:[],_color_def:"#FED976",_color_select:"#BD0026",showGeoJson:function(e){if(this.isActivate){var l=this,s=L.geoJson(e,{style:function(e){var t=e.properties.color;return null==t&&(t=l._color_def,e.properties.color=t),{weight:1,color:"white",fillOpacity:.6,fillColor:t}},onEachFeature:function(a,e){var t="<div><h5>"+a.properties.name+"</h5></div>";e.bindTooltip(t),e.on({mouseover:function(e){var t=e.target;t.setStyle({weight:2,color:"#666",dashArray:"",fillOpacity:.5}),L.Browser.ie||L.Browser.opera||t.bringToFront()},mouseout:function(e){s.resetStyle(e.target)},click:function(e){var t=e.target,r=t.feature.properties.select,o=t.feature.properties.id,i=t.feature.properties.name;r?(t.feature.properties.select=!1,a.properties.color=l._color_def,l.arrSelect.remove(o),l.arrSelectName.remove(i)):(t.feature.properties.select=!0,a.properties.color=l._color_select,l.arrSelect.push(o),l.arrSelectName.push(i)),s.resetStyle(e.target),l.viewWindow.changeSelect(l.arrSelect,l.arrSelectName)}})}}).addTo(map);map.fitBounds(s.getBounds()),this.layerWork=s}}}));