L.widget.bindClass(L.widget.BaseWidget.extend({options:{},layerWork:null,create:function(){},activate:function(){this.showData([{name:"六安市",value:112,location:[116.3123,31.8329]},{name:"安庆市",value:424,location:[116.7517,30.5255]},{name:"滁州市",value:76,location:[118.1909,32.536]},{name:"宣城市",value:45,location:[118.8062,30.6244]},{name:"阜阳市",value:234,location:[115.7629,32.9919]},{name:"宿州市",value:110,location:[117.5208,33.6841]},{name:"黄山市",value:98,location:[118.0481,29.9542]},{name:"巢湖市",value:71,location:[117.7734,31.4978]},{name:"亳州市",value:165,location:[116.1914,33.4698]},{name:"池州市",value:12,location:[117.3889,30.2014]},{name:"合肥市",value:232,location:[117.29,32.0581]},{name:"蚌埠市",value:123,location:[117.4109,33.1073]},{name:"芜湖市",value:73,location:[118.3557,31.0858]},{name:"淮北市",value:16,location:[116.6968,33.6896]},{name:"淮南市",value:75,location:[116.7847,32.7722]},{name:"马鞍山市",value:45,location:[118.6304,31.5363]},{name:"铜陵市",value:93,location:[117.9382,30.9375]}],"#751b87")},disable:function(){map.removeLayer(this.layerWork),this.layerWork=null},showData:function(a,o){var e=this.getOption(a,o);null==this.layerWork?this.layerWork=L.flowEcharts(e).addTo(map):(this.layerWork._echartsOption=e,this.layerWork.redraw())},updateColor:function(a){null!=this.layerWork&&(this.layerWork._echartsOption.series[0].itemStyle.normal.color=a,this.layerWork.redraw())},getOption:function(a,o){if(1<a.length){a.sort(function(a,o){return o.location[1]-a.location[1]});for(var e=1;e<a.length;e++){for(var t=a[e].location,n=!1,i=0;i<e;i++){var l=a[i].location,r=Math.abs(l[0]-t[0]),c=Math.abs(l[1]-t[1]);if(r<.025&&c<.005){n=!0;break}}n&&(t[1]-=.006)}}var u=0,m=[],s=[];for(e=0;e<a.length;e++)u+=a[e].value,m.push({name:a[e].name,value:a[e].location.concat(a[e].value)}),s.push([a[e].location[1],a[e].location[0]]);return 0<s.length&&(map.stop(),map.fitBounds(s)),{backgroundColor:"rgba(238, 238, 238, 0.4)",animation:!0,animationDuration:1e3,animationEasing:"cubicInOut",animationDurationUpdate:1e3,animationEasingUpdate:"cubicInOut",geo:{map:"",roam:!0},tooltip:{trigger:"item"},series:[{type:"effectScatter",coordinateSystem:"geo",data:m,symbolSize:function(a){if(0==u)return 8;var o=a[2]/u*150;return Math.max(o,8)},showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",show:!0}},tooltip:{formatter:function(a,o,e){return a.value[2]<=0?a.name:a.name+" ： "+a.value[2]}},itemStyle:{normal:{color:o,shadowBlur:60,shadowColor:"#cccccc"}},zlevel:1}]}}}));