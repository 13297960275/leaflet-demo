$.fn.extend({dragging:function(t){var e,o,n,r,i=$(this),d=i.parent(),p=$.extend({},{move:"both",randomPosition:!0,hander:1},t),a=p.move,c=(p.randomPosition,p.hander);c=1==c?i:i.find(p.hander),d.css({position:"relative"}),i.find("*").not("img").mousedown(function(t){t.stopPropagation()});var h,f,g,m,u=d.width(),w=d.height(),l=i.width()+parseInt(i.css("padding-left"))+parseInt(i.css("padding-right"))+parseInt(i.css("border-left-width"))+parseInt(i.css("border-right-width")),I=i.height()+parseInt(i.css("padding-top"))+parseInt(i.css("padding-bottom"))+parseInt(i.css("border-top-width"))+parseInt(i.css("border-bottom-width")),b=!1;c.mousedown(function(t){return b=!0,n=t.pageX,r=t.pageY,h=i.position().left,f=i.position().top,!1}),$(document).mouseup(function(t){b=!1}),$(document).mousemove(function(t){if(u=d.width(),w=d.height(),l=i.width()+parseInt(i.css("padding-left"))+parseInt(i.css("padding-right"))+parseInt(i.css("border-left-width"))+parseInt(i.css("border-right-width")),I=i.height()+parseInt(i.css("padding-top"))+parseInt(i.css("padding-bottom"))+parseInt(i.css("border-top-width"))+parseInt(i.css("border-bottom-width")),e=t.pageX,g=h+e-n,o=t.pageY,m=f+o-r,"x"==a.toLowerCase()){var s=function(){if(1==b)return i.css({left:g}),g<0?(i.css({left:"0"}),0):u-l<g?(i.css({left:u-l}),u-l):g}();s&&"function"==typeof p.moveHandler&&p.moveHandler.apply(c,[s])}else"y"==a.toLowerCase()?function(){if(1==b)i.css({top:m}),m<0&&i.css({top:"0"}),w-I<m&&i.css({top:w-I})}():"both"==a.toLowerCase()&&1==b&&(i.css({left:g,top:m}),g<0&&i.css({left:"0"}),u-l<g&&i.css({left:u-l}),m<0&&i.css({top:"0"}),w-I<m&&i.css({top:w-I}))})}});