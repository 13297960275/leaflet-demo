L.widget.bindClass(L.widget.BaseWidget.extend({options:{resources:["./../../lib/leafletPlugins/esri-geocoder/esri-leaflet-geocoder.css","./../../lib/leafletPlugins/esri-geocoder/esri-leaflet-geocoder.js"]},layerWork:null,searchControl:null,create:function(){this.initGeoCoder()},activate:function(){null!=this.layerWork&&(map.addLayer(this.layerWork),map.addControl(this.searchControl))},disable:function(){null!=this.layerWork&&(map.removeLayer(this.layerWork),map.removeControl(this.searchControl))},initGeoCoder:function(){var s="NAME";this.layerWork=L.layerGroup(),this.searchControl=L.esri.Geocoding.geosearch({providers:[L.esri.Geocoding.mapServiceProvider({url:"http://arc.marsgis.cn/arcgis/rest/services/mars/hefei/MapServer/1",layers:[0],searchFields:[s],formatSuggestion:function(e){return e.properties[s]}})],position:"topright",placeholder:"输入名称",title:"POI查询"}),map.addLayer(this.layerWork),map.addControl(this.searchControl);var i=this;this.searchControl.on("results",function(e){i.layerWork.clearLayers();for(var r=[],o=e.results.length-1;0<=o;o--){var t=e.results[o];r.push(t.latlng);var a=L.marker(t.latlng).bindPopup("<b>"+t.properties[s]+"</b><br>"+t.properties.address);i.layerWork.addLayer(a)}setTimeout(function(){1==r.length?map.panTo(r[0]):1<r.length&&map.fitBounds(r)},500)})}}));